# 概论
- 网络协议的概念
  - 协议定义了在两个或多个通信实体间交换报文的格式和顺序，以及报文发送和接收所采取的动作。
- 网络边缘
  - 主机（端设备，host）：服务端、客户端
- 网络核心
  - 分组交换（包交换）：（路由器、链路层交换机）
    - 储存转发传输
    - 分组丢失（丢包）
    - 减小丢失率和重发数据量
  - 电路交换（端到端连接，如电话网络）
    - 时延小，有序传输
    - 频分复用（FDM）和时分复用（TDM）
- ISP（网络业务提供商）
  - 端系统通过ISP接入因特网
  - 较低层的ISP与较高层的ISP相连，较高层的ISP彼此互联
- 网络四类延迟的概念和计算
  1. 处理时延：处理分组首部、决定分组导向，出现在上游节点向路由器传输。
  2. 排队时延：分组在链路上等待传输
  3. 传输时延：将所有分组的比特推向链路的（即传输、发射）所需时间\
    以太网链路速率为 R Mbps，分组长度为 L 比特，传播时延为*L/R*
  4. 传播时延：比特被推向链路后在路由器间传播的时间。\
    路由器间距离为d，该链路传播速率为s，传播时延为*d/s*
- 流量强度、网络吞吐量
  - 瞬时吞吐量：主机b接收的速率（bps）
  - 平均吞吐量：主机b用时 T 秒接收的所有 F 比特，*F/T bps*
- 单位换算关系
bps表示比特每秒，每秒钟传输多少位信息

- 计算机网路分层！！
  - 应用层（HTTP、FTP、SMTP），位于应用层的信息分组成为**报文**
  - 运输层（TCP、UDP），运输层的分组成为**报文段**
  - 网络层（IP），网络层分组称为**数据报**
  - 链路层（以太网、WIFI）：链路层分组称为**帧**
  - 物理层

# 应用层
端口号识别具体应用
- HTTP协议！！（超文本传输协议）
  - HTTP定义了web客户向web服务器请求web页面的方式
  - HTTP请求报文：
    - 请求行（方法字段、url字段、HTTP版本字段）
    - 首部行（host 对象主机等）
    - 实体体（post特有向服务器传输内容）
  - HTTP响应报文：
    - 初始状态行（协议版本、状态码及消息）
    - 首部行
    - 实体体（请求对象本身）
- web缓存（代理服务器）：浏览器与代理服务器创建tcp
  - 内容分发网络 CDN
- 简单邮件传输协议 SMTP 工作流程
  1. 邮件服务器中报文放入报文队列中
  2. SMTP客户端创建到目标邮箱邮件服务器的SMTP服务器的TCP
  3. 握手后连续发送（不使用中间服务器）
  4. 目标接收并放入邮箱
  - SMTP 与 HTTP 区别：
    - HTTP 为拉协议， SMTP为推协议
    - 7比特ASCⅡ
    - 对于多媒体文档，HTTP 把每个对象封装进响应报文中，SMTP将所有报文对象放在一个报文
- DNS协议概念与流程（域名系统）
  - DNS 运行在UDP协议上，是 A.一个由分层的DNS服务器实现的分布式数据库，B.一个使得主机能够查询该数据库的应用层协议
  - 流程：（TLD 顶级域）
    - 根服务器返回顶级域名（如com）的 TLD （顶级域）服务器 IP，TLD 服务器返回权威服务器 IP，权威服务器返回主机名 IP
      - 递归查询：各层DNS服务器依次传递
      - 迭代查询：本地DNS服务器依此进行各层查询  
      - 一般：请求主机到本地DNS服务器是递归的，其余迭代
- P2P协议内容分发
- 视频流媒体与CDN
  - CDN 截获请求
  - 确定请求所适合的 CDN 服务器集群
  - 重定向请求

# 传输层
运输层提供了**进程**间的逻辑通信
- Socket接口：网络插座
  - 通过套接字读出写入数据进行通信，每个套接字能分到一个端口号
  - TCP套接字是四元组（源IP、源port、目的IP、目的port）
- 应用进程通信的复用与解复用
  - 多路分解：将运输层报文段数据交付到相应套接字
  - 多路复用：在源主机从不同套接字中收集数据块，封装首部信息并生成报文段传递给网络层
- UDP协议
  - 用于容错高、速率要求高的应用
  - 校验和：对报文段所有16比特字的和进行反码，溢出补位。接收方将包括校验和在内的数相加结果应该全1
- TCP协议！！可靠传输，连接建立，RTT估计，拥塞控制，流量控制等所有知识点
  - 可靠传输：差错校验、接收反馈、重传
  - TCP：
    - 三次握手：（下列均为标记字段有效）
      1. 客户端向服务器端发送一个TCP报文（Seq=X）
      2. 服务端返回一段报文（Seq=y，Ack=x+1）
      3. 客户端返回一段报文（Seq=x+1，Ack=y+1）
    - 累积确认（ack）
    - RTT（往返时间）估计（超时/重传机制）：$Ertt = (1 - \alpha) * Ertt + \alpha * Srtt$
    - 流量控制：接收窗口
    - 拥塞控制：减小窗口长度，限制发送速率

# 网络层
网络层提供了**主机**间的逻辑通信
- 路由和转发的概念
- IP地址
- 子网与子网掩码、最长匹配原则
- DHCP进行IP获取
- NAT协议、IPv6与隧道技术
- 路由算法！！例如迪杰斯特拉、距离向量
- 路由协议，例如OSPF、BGP
- SDN的概念